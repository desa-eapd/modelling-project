{% assign category_name = include.category_name %}
{% assign show_count = include.show_count | default: false %}
{% assign repo = include.repo %}
{% assign category_slug = category_name | slugify %}

{%- comment -%}
  Construct category URL including GitHub repo if provided
{%- endcomment -%}
{% if repo %}
  {% capture category_url %}{{ site.category_dir }}/{{ repo }}/{{ category_slug }}{% endcapture %}
{% else %}
  {% capture category_url %}{{ site.category_dir }}/{{ category_slug }}{% endcapture %}
{% endif %}

<div class="category-link">
  <a href="{{ category_url | strip | relative_url }}">
    {{ category_name }}
  </a>
  {% if show_count %}
    <span>({{ site.categories[category_name].size }})</span>
  {% endif %}
</div>
